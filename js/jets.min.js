/*! Jets.js - v0.13.0 - 2016-10-31
* http://NeXTs.github.com/Jets.js/
* Copyright (c) 2015 Denis Lukov; Licensed MIT */

;(function(h,b){"undefined"!=typeof module?module.exports=b():"function"==typeof define&&"object"==typeof define.amd?define(b):h.Jets=b()})(this,function(){function h(b){if(!(this instanceof h))return new h(b);var a=this,c={searchSelector:"*AND",hideBy:"display:none",diacriticsMap:{}};a.options={};"columns addImportant searchSelector hideBy manualContentHandling callSearchManually diacriticsMap didSearch invert".split(" ").forEach(function(f){a.options[f]=b[f]||c[f]});if(1<this.options.searchSelector.length){var d=
a.options.searchSelector.trim();a.options.searchSelector=d.substr(0,1);a.options.searchSelectorMode=d.substr(1).toUpperCase()}a.content_tag=document.querySelectorAll(b.contentTag);if(!a.content_tag)throw Error("Error! Could not find contentTag element");a.content_param=b.contentTag;a.search_tag=document.querySelector(b.searchTag);if(!a.search_tag&&!a.options.callSearchManually)throw Error('Error! Provide one of search methods: searchTag or callSearchManually and call .search("phrase") manually');
var e=a.search_tag&&a.search_tag.value||"";a.search=function(b){e!=(e=a.options.callSearchManually&&"undefined"!=typeof b?b:a.search_tag?a.search_tag.value:"")&&(0,a._applyCSS(e),a.options.didSearch&&a.options.didSearch(e))};a._onSearch=function(b){if("keydown"==b.type)return setTimeout(a.search,0);a.search()};a.destroy=function(){a.options.callSearchManually||a._processEventListeners("remove");a._destroy()};a.options.callSearchManually||a._processEventListeners("add");a._addStyleTag();a._setJets();
a._applyCSS(e)}h.prototype={constructor:h,_processEventListeners:function(b){["input","keydown","change"].forEach(function(a){this.search_tag[b+"EventListener"](a,this._onSearch)}.bind(this))},_applyCSS:function(b){var a=this.options;b=this.replaceDiacritics(b.trim().toLowerCase().replace(/\s\s+/g," ")).replace(/\\/g,"\\\\");for(var c=a.searchSelectorMode?b.split(" ").filter(function(a,b,c){return c.indexOf(a)==b}):[b],d="AND"==a.searchSelectorMode,e=Array(c.length),f=0,g=c.length;f<g;f++)e[f]=(d?
this.content_param+">":"")+(a.invert?"":":not(")+"[data-jets"+a.searchSelector+'="'+c[f]+'"]'+(a.invert?"":")");c=a.hideBy.split(";").filter(Boolean).map(function(b){return b+(a.addImportant?"!important":"")});d=(d?"":this.content_param+">")+e.join(d?",":"")+"{"+c.join(";")+"}";this.styleTag.innerHTML=b.length?d:""},_addStyleTag:function(){this.styleTag=document.createElement("style");document.head.appendChild(this.styleTag)},_getText:function(b){return b&&(b.textContent||b.innerText)||""},_getContentTags:function(b){return Array.prototype.slice.call(this.content_tag).reduce(function(a,
c){return a.concat(Array.prototype.slice.call(c.querySelectorAll(b||":scope > *")))},[])},_setJets:function(b,a){for(var c=this,d=c._getContentTags(a?"":b),e,f=0,g;g=d[f];f++)if(!g.hasAttribute("data-jets")||a)e=this.options.manualContentHandling?this.options.manualContentHandling(g):c.options.columns&&c.options.columns.length?c.options.columns.map(function(a){return c._getText(g.children[a])}).join(" "):c._getText(g),g.setAttribute("data-jets",c.replaceDiacritics(e.trim().replace(/\s+/g," ").toLowerCase()))},
replaceDiacritics:function(b){var a=this.options.diacriticsMap,c;for(c in a)if(a.hasOwnProperty(c))for(var d=0,e=a[c].length;d<e;d++)b=b.replace(new RegExp(a[c][d],"g"),c);return b},update:function(b){this._setJets(":scope > :not([data-jets])",b)},_destroy:function(){this.styleTag.parentNode&&document.head.removeChild(this.styleTag);for(var b=this._getContentTags(),a=0,c;c=b[a];a++)c.removeAttribute("data-jets")}};(function(b,a){try{b.querySelector(":scope body")}catch(c){["querySelector","querySelectorAll"].forEach(function(c){var e=
a[c];a[c]=function(a){if(/(^|,)\s*:scope/.test(a)){var d=this.id;this.id="ID_"+Date.now();a=a.replace(/((^|,)\s*):scope/g,"$1#"+this.id);a=b[c](a);this.id=d;return a}return e.call(this,a)}})}})(window.document,Element.prototype);return h});