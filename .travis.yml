sudo: required
language: ruby
rvm: 2.4.0
services:
  - docker
cache:
  bundler: true
  directories: $TRAVIS_BUILD_DIR/tmp/.htmlproofer
before_install: 
    -  gem update --system --no-doc
    -  docker build -t acceptbitcoincash
    -  docker run -p 4000:80 acceptbitcoincash
matrix:
  include:
    - os: linux
      dist: trusty
    - os: osx
      script: bundle exec rake proof_external
      env: NOKOGIRI_USE_SYSTEM_LIBRARIES=true
  allow_failures:
    - script: bundle exec rake proof_external