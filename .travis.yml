dist: trusty
sudo: false
language: ruby
rvm: 2.4.0
cache:
  bundler: true
  directories: $TRAVIS_BUILD_DIR/tmp/.htmlproofer

env:
  global:
    - NOKOGIRI_USE_SYSTEM_LIBRARIES=true

  - TEST_SUITE=proof
  - TEST_SUITE=verify
  - TEST_SUITE=rubocop
  - TEST_SUITE=proof_external

before_install: gem update --system --no-doc

matrix:
  include:
    - script: "bundle exec rake $TEST_SUITE"

  allow_failures:
    - script: "bundle exec rake proof_external"

notifications:
  email: false
  slack:
